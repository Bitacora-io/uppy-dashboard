{"version":3,"sources":["index.js"],"names":["require","h","Fragment","prettierBytes","truncateString","MetaErrorMessage","renderFileName","props","file","meta","author","name","getMaxNameLength","containerWidth","renderAuthor","providerName","remote","dot","url","renderFileSize","size","ReSelectButton","isGhost","toggleAddFilesPanel","i18n","ErrorButton","onClick","error","module","exports","FileInfo","source","alert","toggleFileCard","metaFields"],"mappings":"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","sourcesContent":["const { h, Fragment } = require('preact')\nconst prettierBytes = require('@transloadit/prettier-bytes')\nconst truncateString = require('@uppy/utils/lib/truncateString')\nconst MetaErrorMessage = require('../MetaErrorMessage')\n\nconst renderFileName = (props) => {\n  const { author, name } = props.file.meta\n\n  function getMaxNameLength () {\n    if (props.containerWidth <= 352) {\n      return 35\n    }\n    if (props.containerWidth <= 576) {\n      return 60\n    }\n    // When `author` is present, we want to make sure\n    // the file name fits on one line so we can place\n    // the author on the second line.\n    return author ? 20 : 30\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-name\" title={name}>\n      {truncateString(name, getMaxNameLength())}\n    </div>\n  )\n}\n\nconst renderAuthor = (props) => {\n  const { author } = props.file.meta\n  const { providerName } = props.file.remote\n  const dot = `\\u00B7`\n\n  if (!author) {\n    return null\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-author\">\n      <a\n        href={`${author.url}?utm_source=Companion&utm_medium=referral`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {truncateString(author.name, 13)}\n      </a>\n      {providerName ? (\n        <Fragment>\n          {` ${dot} `}\n          {providerName}\n        </Fragment>\n      ) : null}\n    </div>\n  )\n}\n\nconst renderFileSize = (props) => props.file.size && (\n  <div className=\"uppy-Dashboard-Item-statusSize\">\n    {prettierBytes(props.file.size)}\n  </div>\n)\n\nconst ReSelectButton = (props) => props.file.isGhost && (\n  <span>\n    {' \\u2022 '}\n    <button\n      className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\"\n      type=\"button\"\n      onClick={props.toggleAddFilesPanel}\n    >\n      {props.i18n('reSelect')}\n    </button>\n  </span>\n)\n\nconst ErrorButton = ({ file, onClick }) => {\n  if (file.error) {\n    return (\n      <button\n        className=\"uppy-u-reset uppy-Dashboard-Item-errorDetails\"\n        aria-label={file.error}\n        data-microtip-position=\"bottom\"\n        data-microtip-size=\"medium\"\n        onClick={onClick}\n        type=\"button\"\n      >\n        ?\n      </button>\n    )\n  }\n  return null\n}\n\nmodule.exports = function FileInfo (props) {\n  const { file } = props\n  return (\n    <div\n      className=\"uppy-Dashboard-Item-fileInfo\"\n      data-uppy-file-source={file.source}\n    >\n      <div className=\"uppy-Dashboard-Item-fileName\">\n        {renderFileName(props)}\n        <ErrorButton\n          file={props.file}\n          // eslint-disable-next-line no-alert\n          onClick={() => alert(props.file.error)} // TODO: move to a custom alert implementation\n        />\n      </div>\n      <div className=\"uppy-Dashboard-Item-status\">\n        {renderAuthor(props)}\n        {renderFileSize(props)}\n        {ReSelectButton(props)}\n      </div>\n      <MetaErrorMessage\n        file={props.file}\n        i18n={props.i18n}\n        toggleFileCard={props.toggleFileCard}\n        metaFields={props.metaFields}\n      />\n    </div>\n  )\n}\n"]}